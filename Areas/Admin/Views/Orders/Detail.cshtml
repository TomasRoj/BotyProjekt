@{
    var order = ViewBag.Order as BotyProjekt.Models.Order;
    var orderItems = ViewBag.OrderItems as List<BotyProjekt.Models.OrderItem>;
    
    Layout = null;
}

<!DOCTYPE html>
<html lang="cs">
<head>
    <meta charset="utf-8" />
    <title>Detail objednávky</title>
    <style>
        body { font-family: sans-serif; margin: 0; background: #f4f4f4; padding: 30px; }
        .container { max-width: 900px; margin: 0 auto; background: white; padding: 30px; border-radius: 5px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
        h1 { color: #333; margin-bottom: 10px; }
        .order-header { background: #f0f0f0; padding: 15px; border-radius: 4px; margin-bottom: 20px; }
        .order-info { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px; }
        .info-block h3 { margin: 0 0 10px 0; color: #333; }
        .info-block p { margin: 5px 0; color: #666; }
        table { width: 100%; border-collapse: collapse; margin-top: 20px; }
        th, td { padding: 12px; border-bottom: 1px solid #ddd; text-align: left; }
        th { background: #eee; font-weight: bold; }
        .btn { padding: 10px 15px; background: #007bff; color: white; text-decoration: none; border: none; border-radius: 3px; cursor: pointer; display: inline-block; }
        .btn-back { background: #6c757d; }
    </style>
</head>
<body>

    <div class="container">
        <a href="@Url.Action("Index", "Dashboard", new { area = "Admin", section = "orders" })" class="btn btn-back">? Zpìt na objednávky</a>

        <h1>Detail Objednávky #@order?.Id</h1>

        <div class="order-header">
            <strong>Stav:</strong> Pøijata - @order?.OrderDate.ToString("dd.MM.yyyy HH:mm")
        </div>

        <div class="order-info">
            <div class="info-block">
                <h3>Údaje zákazníka</h3>
                <p><strong>Jméno:</strong> @order?.CustomerName</p>
                <p><strong>E-mail:</strong> @order?.CustomerEmail</p>
                <p><strong>Adresa:</strong> @order?.CustomerAddress</p>
            </div>

            <div class="info-block">
                <h3>Souhrn objednávky</h3>
                <p><strong>Èíslo objednávky:</strong> @order?.Id</p>
                <p><strong>Datum:</strong> @order?.OrderDate.ToString("dd.MM.yyyy")</p>
                <p><strong>Èas:</strong> @order?.OrderDate.ToString("HH:mm")</p>
            </div>
        </div>

        <h2>Položky objednávky</h2>

        @if (orderItems != null && orderItems.Any())
        {
            <table>
                <thead>
                    <tr>
                        <th>Produkt</th>
                        <th>Barva</th>
                        <th>Velikost</th>
                        <th>Množství</th>
                        <th>Cena za kus</th>
                        <th>Celkem</th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var item in orderItems)
                    {
                        <tr>
                            <td>@item.ProductVariant?.Product?.Name</td>
                            <td>@item.ProductVariant?.Color?.Name</td>
                            <td>@item.ProductVariant?.Size?.Name</td>
                            <td>@item.Quantity</td>
                            <td>@item.UnitPrice.ToString("C0")</td>
                            <td><strong>@(item.UnitPrice * item.Quantity).ToString("C0")</strong></td>
                        </tr>
                    }
                </tbody>
            </table>
        }
        else
        {
            <p>Žádné položky v objednávce.</p>
        }

        <div style="text-align: right; margin-top: 20px; font-size: 18px; font-weight: bold;">
            Celková cena: <span style="color: #dc3545;">@order?.TotalPrice.ToString("C0")</span>
        </div>
    </div>

</body>
</html>